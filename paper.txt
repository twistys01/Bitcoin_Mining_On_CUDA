p2p architecture multi layers